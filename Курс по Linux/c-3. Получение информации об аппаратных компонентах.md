Обработка нового устройства на примере флеш-носителя

Команды для отображения информации о компонентах

### Обработка нового устройства на примере флеш-носителя

1. **Обнаружение устройства ядром операционной системы:**
    - Когда флеш-носитель подключается к USB-порту, операционная система начинает процесс обнаружения устройства. Ядро (kernel) операционной системы обнаруживает новое USB-устройство и генерирует событие uevent.
2. **Событие uevent:**
    - Событие uevent представляет собой уведомление от ядра об изменении в состоянии устройства, таком как подключение или отключение. Это событие передается в пользовательское пространство для дальнейшей обработки.
3. **Обработка события в udev:**
    - Демон udev (user device) является частью пользовательского пространства и предназначен для обработки событий uevent. Udev обрабатывает информацию о подключенных устройствах и принимает решения о том, как это устройство должно быть представлено в системе.
4. **Загрузка драйверов:**
    - Udev может загрузить соответствующие драйверы на основе обнаруженного устройства. Это может включать загрузку модулей ядра или выполнение других действий, необходимых для поддержки устройства.
5. **Регистрация устройства в системе:**
    - Загруженный драйвер регистрирует устройство в системе, предоставляя операционной системе информацию о типе устройства, его возможностях и местонахождении.
6. **Присвоение устройству точки монтирования:**
    - Операционная система присваивает уникальную точку монтирования для флеш-носителя.
7. **Монтирование файловой системы:**
    - Флеш-носитель может содержать файловую систему. После присвоения точки монтирования, операционная система выполняет монтирование файловой системы.
8. **Уведомление пользователя:**
    - В зависимости от настроек операционной системы и конфигурации udev, пользователю может быть предоставлена информация о подключенном устройстве.
9. **Работа с содержимым устройства:**
    - После успешного монтирования, пользователи могут работать с содержимым флеш-носителя.
10. **Отключение устройства:**
    - При необходимости флеш-носитель может быть безопасно извлечен, что генерирует новое событие uevent.
11. **Отключение устройства ядром:**
    - Операционная система уведомляет ядро о завершении использования устройства, и, при необходимости, выгружает связанные с устройством драйверы.

### Команды для отображения информации о компонентах

1. `**dmesg**`**:**
    
    Команда `**dmesg**` выводит сообщения ядра операционной системы, включая информацию о обнаруженном оборудовании, загрузке ядра, ошибках и другие системные события.
    
2. `**udevadm info -n <name>**`**:**
    
    Команда `**udevadm info**` предоставляет информацию о устройствах. Запрос с `**-n <name>**` позволяет указать имя устройства, для которого требуется получить информацию.
    
    - _Пример использования:_ `**udevadm info -n /dev/sda**`
3. `**udevadm monitor**`**:**
    
    Отслеживает события udev в реальном времени, позволяя увидеть изменения в системе при подключении или отключении устройств.
    
4. `**lspci**`**:**
    
    Выводит информацию о шинах PCI и устройствах, подключенных к ним.
    
    - PCI (Peripheral Component Interconnect) - это стандартная система шин для подключения периферийных устройств к материнской плате компьютера. Она предоставляет универсальный интерфейс для связи между центральным процессором (CPU), оперативной памятью и различными устройствами, такими как видеокарты, звуковые карты, сетевые адаптеры и другие периферийные устройства.
5. `**lsblk**`**:**
    
    Отображает информацию о блочных устройствах, таких как жесткие диски и флеш-накопители. Major номера указывают на тип устройства (например, жесткий диск, CD-ROM).
    
6. `**lscpu**`**:**
    
    Предоставляет информацию о процессоре, включая количество ядер, архитектуру и другие характеристики.
    
    Разница между 32-битными и 64-битными системами заключается в том, какой объем памяти они могут адресовать (32-битные системы ограничены 4 ГБ, в то время как 64-битные системы могут адресовать гораздо больше).
    
7. `**lsmem**`**:**
    
    Выводит информацию о использовании памяти, включая размер устройств и распределение памяти между устройствами.
    
8. `**free**`**:**
    
    Показывает общее количество и использование физической и виртуальной памяти. Ключи `**-m**`, `**-k**`, `**-g**` указывают единицы измерения в мегабайтах, килобайтах или гигабайтах.
    
9. `**lshw**`**:**
    
    Команда `**lshw**` (либо `**sudo lshw**` для получения полной информации) предоставляет подробную информацию о оборудовании компьютера, включая процессор, память, материнскую плату, устройства PCI и другие.
<div class="page-break" style="page-break-before: always;"></div>

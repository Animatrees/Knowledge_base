Systemctl

Journalctl

### Systemctl

`**systemctl**` - это основная утилита управления службами в системах, использующих systemd в качестве инициализации. Она предоставляет широкий набор функций для управления службами, целевыми элементами, сокетами, устройствами, таймерами и другими типами units.

Команды systemctl для targets:

1. **Просмотр текущей system.target:** **`systemctl get-default`**
2. **Установка текущей system.target:** **`systemctl set-default <target_name>`**
3. **Просмотр списка зависимостей:** **`systemctl list-dependencies <target_name>`**
4. **Просмотр списка units:** **`systemctl list-units --type=target`**

Команды systemctl для service:

1. **Запуск, перезапуск, остановка, перезагрузка:**
    - Запуск: `**systemctl start <service_name>**`
    - Перезапуск: `**systemctl restart <service_name>**`
    - Остановка: `**systemctl stop <service_name>**`
    - Перезагрузка: `**systemctl reload <service_name>**` (перезагрузка конфигурации не всегда доступна для всех служб)
2. **Просмотр статуса:** **`systemctl status <service_name>`**
    - **active (running):** Этот статус означает, что служба запущена и активно выполняет свои функции. Все процессы, связанные с этой службой, работают корректно.
    - **active (waiting):** Этот статус означает, что служба активна, но находится в режиме ожидания выполнения какого-то условия или события, чтобы начать свою работу.
    - **active (exited):** Этот статус означает, что служба успешно завершила свою работу и вышла из активного состояния. Например, это может произойти после выполнения какой-то задачи или команды.
    - **inactive (dead):** Этот статус означает, что служба неактивна и не запущена. Все её процессы завершены и служба не выполняет никаких функций.
    - **enabled:** Этот статус указывает на то, что служба настроена на автозапуск при запуске системы.
    - **disabled:** Этот статус указывает на то, что служба не запускается автоматически при запуске системы.
    - **static:** Этот статус означает, что служба не может быть запущена или остановлена, поскольку она является частью другой службы или компонента системы.
    - **masked:** Этот статус указывает на то, что служба заблокирована и не может быть запущена. Это может быть сделано для предотвращения случайного запуска службы.
    - **alias:** Этот статус указывает на то, что данная служба является псевдонимом (алиасом) для другой службы. Выводит информацию о базовой службе.
    - **linked:** Этот статус указывает на то, что служба является символической ссылкой на другую службу. Показывает информацию о базовой службе.
3. **Просмотр списка:**
    - Список всех служб: `**systemctl list-units --type=service**`
    - Список активных служб: `**systemctl --type=service --state=active**`
4. **Добавление, изъятие в/из автозагрузки:**
    - Добавление в автозагрузку: `**systemctl enable <service_name>**`
    - Изъятие из автозагрузки: `**systemctl disable <service_name>**`
5. **Редактирование:** **`systemctl edit <service_name> --full`**
6. **Перезагрузка конфигурации менеджера служб:** **`systemctl daemon-reload`**

### Journalctl

`**journalctl**` - это утилита для просмотра и анализа системного журнала в systemd. Системный журнал хранит разнообразную информацию о событиях и сообщениях, происходящих в системе, включая журналы служб, ядра, аудита и другие. `**journalctl**` позволяет пользователю просматривать, фильтровать и анализировать эти журналы для выявления проблем, мониторинга системы и отладки.

- Команда `**journalctl**` используется для просмотра журналов системного журнала. Без дополнительных параметров она отображает все доступные записи из системного журнала.
- `**journalctl -u name.service**`**:** используется для просмотра записей журнала только для указанной службы (service).
- Флаг `**-b**` в `**journalctl**` используется для отображения записей только для текущего перезапуска системы. Это полезно для анализа событий, произошедших в текущей сессии работы системы.
- **флаг -p err...notice:** Флаг `**-p**` используется для фильтрации записей по приоритету.
    
    `**-p err**` отобразит записи с приоритетом "err" (ошибки), а `**-p notice**` отобразит записи с приоритетом "notice" (уведомления) и выше. Можно комбинировать несколько уровней, указывая их через запятую.
    
    - **emergency (0):** Сообщения об ошибках высшего приоритета, указывающие на критические проблемы, которые требуют немедленного вмешательства. Например, сбои оборудования или серьезные ошибки ядра.
    - **alert (1):** Сообщения о критических событиях, которые требуют немедленного внимания, но не так серьезны, как уровень emergency. Примером может быть сбой критической службы.
    - **crit (2):** Сообщения о критических условиях, которые требуют внимания. Это могут быть серьезные ошибки или события, которые могут повлиять на работу системы, но не являются критическими.
    - **err (3):** Сообщения об ошибках, которые не критические, но все же требуют внимания. Это могут быть проблемы с конфигурацией или неполадки в работе службы.
    - **warning (4):** Сообщения о предупреждениях, которые указывают на потенциальные проблемы или ситуации, требующие внимания.
    - **notice (5):** Информационные сообщения о нормальной работе системы или о событиях, которые могут быть полезны для отслеживания.
    - **info (6):** Общая информация о работе системы. Это сообщения, которые обычно используются для регистрации различных событий или действий.
    - **debug (7):** Отладочная информация. Обычно используется для выявления и устранения проблем в процессе разработки и отладки.
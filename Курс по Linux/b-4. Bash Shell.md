Виды оболочек

Команды

Bash Shell Features

Переменные среды (environment variables)

Bash Prompt

Shell - это оболочка, предоставляющая пользователю средство взаимодействия с ядром операционной системы. Shell позволяет пользователю вводить команды, выполнять программы, управлять файлами и процессами, а также выполнять другие операции в командной строке.

### Виды оболочек

1. **Bourne Shell (sh):**
    - **Особенности:**
        - Bourne Shell была разработана Стивеном Борном (Stephen Bourne) в Bell Labs в конце 1970-х годов.
        - Sh является довольно минималистичной оболочкой, предоставляющей основные команды и возможности для ввода команд с клавиатуры.
        - Она была стандартной оболочкой для многих Unix-подобных систем в течение долгого времени.
2. **C Shell (csh):**
    - **Особенности:**
        - C Shell была разработана Биллем Джоем (Bill Joy) в 1978 году.
        - Она обладает более продвинутым синтаксисом и предоставляет улучшенные возможности интерактивной работы.
        - C Shell поддерживает историю команд, возможность использования переменных окружения и другие функции.
        - Она также предлагает некоторые схожие синтаксические элементы с языком программирования C.
3. **Ksh (KornShell):**
    - **Особенности:** Ksh является коммерческой оболочкой, но существует также свободная реализация под названием `**pdksh**`. Она предоставляет расширенные возможности, поддерживает сценарии и включает в себя множество функций, взятых из оболочек Bourne shell и C shell.
4. **Zsh (Z Shell):**
    - **Особенности:** Zsh представляет собой более расширенную и настраиваемую оболочку, основанную на Bash. Она предлагает расширенные возможности автозавершения команд, мощные темы оформления, управление модулями, а также различные опции для удобства использования. Zsh становится все более популярной среди пользователей, которые ищут богатый функционал.
5. **Bash (Bourne Again SHell):**
    - **Особенности:** Bash является стандартной оболочкой для большинства дистрибутивов Linux. Она предоставляет множество функций, включая автозавершение команд, историю команд, встроенные переменные и многое другое. Bash поддерживает сценарии (скрипты) на языке сценариев командной строки.
6. **Fish (Friendly Interactive SHell):**
    - **Особенности:** Fish обладает простым и дружелюбным интерфейсом, предоставляющим цветовую подсветку синтаксиса, автозавершение с подсказками и удобство использования для новичков. Fish имеет свои особенности и не является совместимым с синтаксисом Bash или Zsh.
7. **Dash:**
    - **Особенности:** Dash является легковесной и быстрой оболочкой, часто используемой в качестве оболочки по умолчанию для скриптов во многих дистрибутивах Linux. Она стремится быть минималистичной и предлагает ограниченный, но быстрый и эффективный набор функций.

**Различия:**

- **Синтаксис и Совместимость:** Оболочки имеют различный синтаксис, и скрипты, написанные для одной оболочки, могут не совсем корректно выполняться в другой.
- **Функциональность:** Каждая оболочка имеет свои уникальные функции. Например, Zsh и Fish предлагают продвинутые возможности автозавершения и тем оформления, в то время как Bash широко используется в качестве стандартной оболочки с большим набором функций для командной строки.
- **Производительность:** Некоторые оболочки, такие как Dash, могут быть более легковесными и быстрыми, что делает их предпочтительными для использования в сценариях и скриптах.

  

### Команды

- **`echo $SHELL`** - отобразить какой shell используется по умолчанию.
- **`chsh`** (Change Shell) - используется для изменения оболочки по умолчанию для текущего пользователя.
    
    Некоторые важные замечания:
    
    1. **Требования к безопасности:** Обычно, для изменения оболочки пользователь должен иметь достаточные права доступа. Это может потребовать ввода пароля или аутентификации через sudo (в зависимости от конфигурации системы).
    2. **Доступные оболочки:** Вы можете указать любую доступную оболочку на вашей системе в качестве новой оболочки по умолчанию (например, `**/bin/bash**`, `**/bin/zsh**`, `**/bin/fish**`, и так далее).
    3. **Конфигурация:** После изменения оболочки с помощью `**chsh**`, необходимо перезагрузить сеанс или войти в систему заново, чтобы изменения вступили в силу.
    
    Пример использования команды `**chsh**`:
    
    **`chsh -s /bin/bash`**
    
    В этом примере оболочка по умолчанию изменяется на Bash (`**/bin/bash**`). После выполнения этой команды, при следующем входе в систему для указанного пользователя будет использоваться новая оболочка.
    
- **`cat /etc/shells`** - просмотреть доступные оболочки на вашей системе. В этом файле перечислены пути к установленным оболочкам, которые можно использовать.

### Bash Shell Features

1. **Автозавершение:**
    - Bash предоставляет автозавершение команд, позволяя пользователю нажимать клавишу `**Tab**` для автоматического завершения команд, путей к файлам и даже имен переменных.
2. `**alias**`**:** Псевдонимы облегчают ввод длинных или часто используемых команд.
    
    - **Пример использования:** **`alias ll='ls -l'`**
    
    Этот пример создает псевдоним `**ll**` для команды `**ls -l**`, так что теперь, вместо `**ls -l**`, вы можете использовать `**ll**`.
    
3. `**history**`**:** Bash сохраняет историю введенных команд, позволяя пользователю легко повторять предыдущие команды или редактировать их.
    
    - **Пример использования:** **`history`**
    
    Эта команда выведет список предыдущих команд с их номерами. Вы можете использовать номера команд для повторного выполнения или выполнения команды из истории, например, `**!42**` выполнит команду под номером 42.
    
4. **Перенаправление ввода/вывода:**
    - Bash поддерживает перенаправление ввода и вывода, что позволяет пользователю управлять потоками данных между командами и файлами.
5. **Переменные и подстановка значений:**
    - Bash позволяет определять переменные и использовать их в командах. Также поддерживается подстановка значений, например, использование `**$VAR**` для вставки значения переменной.
6. **Условные операторы:**
    - Bash поддерживает условные операторы, такие как `**if**`, `**elif**`, `**else**`, что позволяет создавать скрипты, основанные на условиях.
7. **Циклы:**
    - Bash поддерживает циклы, такие как `**for**` и `**while**`, что облегчает выполнение повторяющихся задач в скриптах.
8. **Функции:**
    - Пользователи могут определять собственные функции в Bash, что позволяет группировать команды и создавать более структурированные и переиспользуемые скрипты.
9. **Подстановка команд:**
    - Bash поддерживает выполнение внутренних и внешних команд внутри других команд, используя обратные кавычки или `**$(...)**`. Это позволяет использовать вывод одной команды в качестве аргумента для другой.
10. **Контроль задач:**
    - Bash предоставляет возможность управления задачами в фоновом режиме, приостановки и возобновления их выполнения.
11. **Поддержка скриптования:**
    - Bash широко используется для написания скриптов, автоматизации задач и создания пользовательских сценариев.

  

### Переменные среды (environment variables)

Переменные среды — это переменные, которые используются операционной системой и приложениями для хранения конфигурационной информации, определения путей к различным ресурсам или передачи данных от одного процесса к другому в среде операционной системы. Они обеспечивают способ передачи информации и параметров между различными компонентами системы.

Вот несколько ключевых моментов относительно переменных среды:

1. **Назначение:** Переменные среды используются для определения параметров и настроек, которые могут влиять на поведение программ и системы в целом.
2. **Установка и просмотр:** Переменные среды можно устанавливать и просматривать как в командной строке (временные), так и в файле конфигурации (постоянные). Например, в Bash можно установить переменную среды так: `**export MY_VARIABLE=value**`.
3. **Использование в скриптах:** В скриптах и программных сценариях переменные среды используются для передачи информации и параметров. Программы могут обратиться к переменным среды, чтобы получить значения, которые могут влиять на их выполнение.
4. **Пользовательские переменные:** Помимо встроенных переменных, пользователи и администраторы могут создавать свои собственные переменные среды для хранения пользовательской информации или параметров.

С помощью команды **`env`** можно получить список переменных среды.

Некоторые примеры распространенных переменных среды в Linux:

- `**PATH**`**:** Определяет список директорий, в которых операционная система будет искать исполняемые файлы.
- `**HOME**`**:** Представляет домашнюю директорию текущего пользователя.
- `**LANG**` **или** `**LC_ALL**`**:** Управляют локализацией и языком, используемыми приложениями.
- `**USER**` **или** `**LOGNAME**`**:** Показывают имя текущего пользователя.
- `**PWD**`**:** Содержит текущую рабочую директорию (путь).

Файлы `**~/.profile**` и `**~/.pam_environment**` могут использоваться для установки переменных среды в системах Linux.

1. **~/.profile:**
    - Файл `**~/.profile**` часто используется для настройки переменных среды при входе в систему в среде командной строки. Вы можете добавить следующую строку в `**~/.profile**`: **`export MY_VARIABLE="Hello, World!"`**
    - После внесения изменений, выполните `**source ~/.profile**` или войдите в систему заново, чтобы изменения вступили в силу.
2. **~/.pam_environment:**
    - Файл `**~/.pam_environment**` используется для установки переменных среды, и он прочитывается PAM (Pluggable Authentication Modules) при входе в систему.
    - В файле `**~/.pam_environment**` вы можете добавить строку: `**MY_VARIABLE DEFAULT="Hello, World!"**`
        
        Важно использовать `**DEFAULT**` в данном контексте.
        
    - После внесения изменений, выполните вход в систему заново.

Обратите внимание, что не все системы могут использовать `**~/.pam_environment**`. Некоторые дистрибутивы Linux могут требовать дополнительной конфигурации для активации чтения этого файла. Пожалуйста, проверьте документацию вашей системы для подробностей.

### Bash Prompt

Bash prompt — это приглашение командной строки, которое отображается перед тем, как пользователь введет свою команду. В Bash это управляется переменной PS1 (Prompt String 1).

Можно настроить свой пригласительный знак, чтобы отобразить различные информационные элементы, такие как текущий каталог, имя пользователя, хост, временные метки и другие.

Некоторые специальные символы, которые можно использовать для настройки Bash prompt ([полный список](https://www.gnu.org/software/bash/manual/bash.html#Controlling-the-Prompt)):

- **\d:** Дата в формате "День Месяц Год" (например, "Пн Апр 03").
- **\h:** Имя хоста (короткое).
- **\H:** Полное имя хоста.
- **\j:** Количество задач в фоне.
- **\l:** Имя терминала.
- **\s:** Имя оболочки (например, "bash").
- **\t:** Текущее время в формате "ЧЧ:ММ:СС".
- **\T:** Текущее время в формате "ЧЧ:ММ".
- **\@:** Текущее время в 12-часовом формате am/pm.
- **\u:** Имя текущего пользователя.
- **$:** Знак доллара (`**$**` для обычного пользователя, `**#**` для суперпользователя).
- **\w:** Полный путь текущего рабочего каталога.
- **\W:** Текущий рабочий каталог (только последняя часть).

Пример использования:

**`PS1='[\d \t]<\u@\h>\W\$’`** - добавляет дату, время, имя пользователя, имя хоста, текущий рабочий каталог и обозначение прав пользователя.

Чтобы вернуть значение по умолчанию:

1. Вы можете использовать команду `**unset**` для удаления переменной PS1 из текущей оболочки. Это приведет к тому, что Bash вернется к значению по умолчанию для PS1. Потребуется перезапуск оболочки.
2. Вы можете просто присвоить ей значение по умолчанию, которое определено для вашего пользователя. Обычно значение по умолчанию содержит информацию о вашем имени пользователя, текущем каталоге и знаке доллара для обычного пользователя или решетке для суперпользователя.
    
    **`PS1='\u@\h:\w\$ ‘`**
    
3. Вы можете просто перезапустить оболочку. Выполните команду: `**exec bash**`

<div class="page-break" style="page-break-before: always;"></div>

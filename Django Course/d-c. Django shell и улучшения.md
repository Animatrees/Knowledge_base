Django Shell

IPython

Django-extensions

### Django Shell

**Django shell** – это интерактивная оболочка Python, которая интегрирована с Django-проектом.

Она позволяет:

- **Взаимодействовать с моделями Django:** создавать, читать, обновлять и удалять объекты в базе данных.
- **Выполнять произвольный код Python:** тестировать фрагменты кода, отлаживать проблемы и экспериментировать с функциями Django.
- **Доступ к настройкам проекта:** просматривать и изменять настройки Django-приложения.

**Зачем использовать Django shell?**

- **Интерактивное тестирование:** Django shell – это удобный инструмент для быстрого тестирования кода и проверки функциональности приложения.
- **Отладка:** Django shell позволяет шаг за шагом выполнять код и отслеживать значения переменных, что может помочь найти и исправить ошибки.
- **Управление данными:** Django shell позволяет напрямую управлять данными в базе данных проекта, что может быть полезно для внесения тестовых данных или исправления ошибок.
- **Прототипирование:** Django shell можно использовать для быстрого прототипирования новых функций приложения.

Django shell запускается командой: `python manage.py shell`

Для выхода из оболочки - `exit`

### IPython

Можно улучшить Django shell, используя более продвинутую интерактивную оболочку IPython. IPython предоставляет множество дополнительных функций и улучшений по сравнению с обычным стандартным интерпретатором Python.

**Преимущества использования IPython в Django shell:**

- **Подсказки и автодополнение:** IPython предоставляет подсказки и автодополнение для имён модулей, функций и методов, что делает разработку более эффективной и удобной.
- **Магические команды:** IPython включает много полезных магических команд для выполнения различных операций, например, отображение информации о переменных, запуск внешних скриптов, профилирование кода и многое другое.
- **Визуализация данных:** IPython обеспечивает поддержку для визуализации данных с помощью библиотек вроде matplotlib, что может быть полезно при анализе данных прямо из оболочки.
- **Интерактивная отладка:** IPython предоставляет инструменты для интерактивной отладки, включая точки останова, просмотр стека вызовов и многое другое.

Для того, чтобы установить IPython используется следующая команда: `pip install ipython`

После установки запуск и выход из оболочки выполняется с помощью тех же команд, что и для обычной оболочки.

### Django-extensions

Django-extensions использует IPython как базовую оболочку для обеспечения улучшенного опыта работы с Django shell, добавляя дополнительные возможности и инструменты, которые не доступны в стандартной оболочке Python или IPython по умолчанию.

Django-extensions предоставляет несколько инструментов, которые улучшают функциональность работы с ORM в Django:

1. **Shell Plus (**`**shell_plus**`**):**
    - Shell Plus является улучшенной версией стандартной оболочки Django, которая включает в себя все функции обычной оболочки Django, а также расширенную функциональность IPython.
    - Она **автоматически импортирует все модели проекта**, что позволяет моментально начать работу с базой данных без дополнительных действий.
    - Это позволяет быстро и удобно выполнять запросы к моделям, создавать, изменять и удалять объекты данных прямо из оболочки.
2. **Query Inspection (**`**print_sql**`**):**
    - Этот инструмент позволяет выводить сгенерированный SQL-код для запросов ORM Django перед их выполнением.
    - Это особенно полезно при оптимизации запросов и отладке, поскольку позволяет легко анализировать и проверять, какие запросы отправляются в базу данных.
3. **Graph Models (**`**graph_models**`**):**
    - Этот инструмент генерирует диаграмму ER (Entity-Relationship) для моделей Django.
    - Он визуализирует связи между моделями, что делает понимание структуры базы данных более интуитивным и помогает в проектировании базы данных.
4. **ORM-версии команд (**`**generate_model**` **и другие):**
    - Django-extensions предоставляет набор команд для генерации ORM-версий существующих баз данных, что позволяет быстро создать модели Django на основе существующих таблиц в базе данных.
    - Это упрощает процесс интеграции существующих баз данных с Django-приложением и позволяет быстро начать работу над проектом без необходимости создания моделей вручную.

Для установки - `pip install django-extensions`, также нужно добавить в приложения Django - `INSTALLED_APPS = […, ‘django_extensions’, …]`

Запуск оболочки выполняется командой `python manage.py shell_plus`

Запуск оболочки с флагом `--print-sql` выводит сгенерированные SQL-запросы для каждого запроса ORM Django перед его выполнением.

<div class="page-break" style="page-break-before: always;"></div>

О том что такое менеджер моделей можно почитать [[d-d. Create-Read-Update-Delete]].

### **Пользовательский менеджер**

**Пользовательский менеджер модели** - это класс, который наследуется от базового класса `models.Manager` и позволяет определить дополнительные методы для работы с объектами модели. Они часто используются для управления запросами к базе данных и определения пользовательских логик работы с данными.

**Пользовательские менеджеры обычно создаются для:**

- **Расширения функциональности**: Пользовательские менеджеры позволяют добавить дополнительные методы для выполнения специфических операций с объектами модели.
- **Улучшения читаемости кода**: Перенос логики работы с данными в менеджер позволяет сделать код более читаемым и модульным.
- **Повторного использование кода**: Методы, определенные в пользовательских менеджерах, могут быть повторно использованы в различных частях приложения.
- **Пользовательских запросов**: Менеджеры позволяют определять пользовательские запросы к базе данных, что облегчает выполнение сложных операций.
- **Контроля доступа к данным**: С помощью пользовательских менеджеров можно управлять доступом к данным и реализовывать различные политики безопасности.

**Пример использования пользовательского менеджера:**

```Python
class PublishedModel(models.Manager):
    def get_queryset(self):
        return super().get_queryset().filter(is_published=1)

class Women(models.Model):
    ...
    objects = models.Manager()
    published = PublishedModel()
```

В этом примере:

- Создан класс `PublishedModel`, который наследуется от `models.Manager`.
- Переопределен метод `get_queryset()`, который возвращает только опубликованные записи.
- В модели `Women` созданы два менеджера:
    - `objects`: стандартный менеджер - если в модели создаётся пользовательский менеджер, то базовый менеджер перестаёт работать, чтобы сохранить его функциональность, нужно создать данный атрибут и указать ссылку на базовый менеджер.
    - `published`: пользовательский менеджер, который возвращает только опубликованные записи.

> [!important]  
> Когда Django обращается к модели, он использует первый определенный менеджер в этой модели как "default" Manager. Это означает, что ряд функций Django, таких как dumpdata (для создания дампа данных), будут использовать именно этот менеджер по умолчанию для работы с моделью. Если вы определяете свой собственный менеджер и он идет первым в списке, он будет считаться менеджером по умолчанию.Чтобы явно указать менеджер по умолчанию, вы можете использовать атрибут Meta.default_manager_name в классе модели.

<div class="page-break" style="page-break-before: always;"></div>

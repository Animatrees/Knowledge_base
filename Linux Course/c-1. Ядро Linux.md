Преимущества использования ядра

Типы ядер

Задачи ядра

Версия релиза ядра

GNU

Различия дистрибутивов

Разделение памяти в Linux

Взаимодействие программ с ядром и ядра с аппаратным обеспечением

Примеры системных вызовов

Ядро Linux - это основная часть операционной системы Linux. Оно является своего рода "мозгом" системы, управляющим ресурсами компьютера и обеспечивающим взаимодействие между аппаратным обеспечением (процессор, память, устройства ввода/вывода) и программным обеспечением (приложения, пользовательский интерфейс).

### Преимущества использования ядра

1. **ОС получает ресурсы от ядра:**
    - Ядро операционной системы управляет доступом приложений к физическим ресурсам компьютера, таким как процессор, оперативная память и устройства ввода/вывода.
    - Ядро обеспечивает эффективное распределение ресурсов между различными процессами, учитывая их приоритеты и потребности.
    - Это позволяет системе выполнять несколько задач одновременно, обеспечивая отзывчивость и производительность.
2. **Приложения работают в своих собственных окружениях:**
    - Ядро обеспечивает изоляцию процессов, предотвращая взаимное влияние между ними. Каждое приложение работает в своем собственном виртуальном адресном пространстве.
    - Это обеспечивает стабильность системы, поскольку проблемы в одном процессе не влияют на работу других.
    - Изоляция также повышает безопасность, поскольку приложения не могут произвольно взаимодействовать с памятью или ресурсами других процессов.
3. **Перенос ПО на другую архитектуру требует изменить только ядро:**
    - Ядро предоставляет абстракцию для взаимодействия с аппаратным обеспечением. Приложения взаимодействуют с ядром через стандартизированные интерфейсы.
    - Это упрощает процесс переноса программного обеспечения на новую аппаратную архитектуру, так как приложения не зависят напрямую от деталей аппаратного обеспечения.
    - Изменения, связанные с аппаратной архитектурой, могут быть внесены в ядро, минимизируя необходимость изменений в приложениях.

### Типы ядер

1. **Микроядра (Microkernel):**
    - _Описание:_ Микроядра разделяют базовые функции операционной системы на отдельные модули, каждый из которых работает как отдельный процесс (например, управление памятью, планирование задач).
    - _Преимущества:_ Лучшая изоляция, более гибкая конфигурация, обновление отдельных компонентов без перезагрузки всей системы, высокая стабильность.
    - _Недостатки:_ Может быть накладно в терминах производительности из-за взаимодействия между модулями через микроядро, низкая производительность.
2. **Монолитные ядра (Monolithic Kernel):**
    - _Описание:_ В монолитных ядрах все базовые функции операционной системы выполняются внутри одной программы-ядра.
    - _Преимущества:_ Простота, эффективность взаимодействия между компонентами, высокая производительность.
    - _Недостатки:_ Отсутствие четкой изоляции между компонентами, что может привести к проблемам стабильности, ниже отказоустойчивость.
3. **Гибридные ядра (Hybrid Kernel):**
    - _Описание:_ Комбинируют принципы монолитных и микроядер, пытаясь достичь баланса между производительностью и гибкостью.
    - _Преимущества:_ Комбинированный подход позволяет использовать лучшие стороны обоих типов ядер.
    - _Недостатки:_ Возможны сложности в реализации и поддержке.

### Задачи ядра

1. **Управление памятью:**
    
    Ядро отвечает за эффективное управление памятью компьютерной системы. Это включает в себя выделение и освобождение памяти для процессов, а также обеспечение защиты памяти между разными процессами.
    
    _Функции:_
    
    - Выделение и освобождение физической и виртуальной памяти.
    - Управление страничным кэшированием.
    - Реализация механизмов виртуальной памяти и адресации.
    
2. **Управление процессами:**
    
    Ядро отвечает за создание, планирование, выполнение и завершение процессов. Процесс представляет собой выполняющуюся программу, включая ее код, данные и текущее состояние.
    
    _Функции:_
    
    - Создание и уничтожение процессов.
    - Планирование выполнения процессов.
    - Многозадачность и переключение контекста между процессами.
    
3. **Драйвера устройств:**
    
    Ядро обеспечивает интерфейс для взаимодействия с аппаратными устройствами компьютера, такими как принтеры, видеокарты, сетевые адаптеры и другие.
    
    _Функции:_
    
    - Загрузка и управление драйверами устройств.
    - Предоставление стандартизированных интерфейсов для взаимодействия с устройствами.
    - Реализация механизмов прерываний и обработка событий от устройств.
    
4. **Системные вызовы:**
    
    Ядро предоставляет системные вызовы, которые являются интерфейсом для взаимодействия между приложениями и ядром. Системные вызовы позволяют приложениям запрашивать различные услуги от операционной системы.
    
    _Функции:_
    
    - Реализация системных вызовов, таких как чтение/запись файлов, создание процессов, работа с сетью и т. д.
    - Предоставление стандартизированного интерфейса для приложений.
    
5. **Безопасность:**
    
    Ядро отвечает за обеспечение безопасности системы, контролируя доступ к ресурсам и защищая данные от несанкционированного доступа.
    
    _Функции:_
    
    - Механизмы контроля доступа к файлам и ресурсам.
    - Реализация механизмов идентификации и аутентификации.
    - Защита ядра от вредоносного программного обеспечения и атак.
    

### Версия релиза ядра

Команда `uname` (без аргументов) выводит название ядра, используемого в системе.

Команда `uname -r` выводит информацию о версии релиза ядра.

Пример:

`5.4.0-88-generic`

1. **“5” - Основная версия (Major Version):**
    
    Это главная версия ядра, которая обычно изменяется с выпуском крупных обновлений и содержит значительные изменения в функциональности и структуре ядра.
    
2. **“4” - Подверсия (Minor Version):**
    
    Подверсия представляет собой небольшие изменения в ядре, включая исправления ошибок, улучшения и некоторые новые функции. Эти обновления не так существенны, как изменения в основной версии.
    
3. **“0” -** **Патч (Patch Level):**
    
    Патч обычно указывает на исправления ошибок и обновления без внесения значительных изменений в функциональность. Если в данном случае патч равен "0", это может означать основной релиз.
    
4. **"88-generic" -** **Спецификация сборки (Build Specification):**
    
    Эта часть может содержать дополнительные метаданные, указывающие на конкретные настройки сборки или варианты конфигурации ядра. В данном случае, "88-generic" может относиться к конфигурации, связанной с дистрибутивом Linux, таким как Ubuntu, где "generic" обычно указывает на общий набор параметров конфигурации.
    

### GNU

GNU (GNU's Not Unix) - это проект свободного и открытого программного обеспечения, запущенный Ричардом Столлманом в 1983 году. Цель проекта заключается в создании полностью свободной операционной системы, совместимой с UNIX, но не зависящей от него. GNU разрабатывается сообществом программистов, обеспечивая пользователям свободу использовать, изучать, модифицировать и распространять программное обеспечение.

Когда говорят "GNU/Linux", обычно имеют в виду операционную систему, которая является комбинацией ядра Linux и различных компонентов из проекта GNU. Термин "GNU/Linux" подчеркивает вклад проекта GNU в создание свободных и открытых программных инструментов, используемых вместе с ядром Linux для создания полноценной операционной системы.

Операционные системы, основанные на ядре Linux, обычно включают ядро Linux и множество других компонентов, таких как утилиты командной строки, библиотеки, компиляторы и другие инструменты, предоставляемые проектом GNU. Эти компоненты в совокупности обеспечивают полноценное функционирование операционной системы.

### Различия дистрибутивов

1. **Версии ядра:**
    - Разные дистрибутивы могут поставляться с разными версиями ядра Linux. Некоторые предпочитают использовать более стабильные и проверенные версии, тогда как другие включают последние версии для поддержки нового аппаратного обеспечения и функций.
2. **Структура директорий:**
    - Структура файловой системы может различаться между дистрибутивами. Например, расположение конфигурационных файлов, библиотек и исполняемых файлов может отличаться.
3. **Менеджеры пакетов:**
    - Разные дистрибутивы могут использовать различные системы управления пакетами для установки, обновления и удаления программного обеспечения. Например, Debian и его производные (Ubuntu) используют систему APT, в то время как Red Hat и Fedora используют YUM или DNF.
4. **Дополнительное программное обеспечение:**
    - Набор предустановленного программного обеспечения также может существенно различаться. Некоторые дистрибутивы могут включать в себя определенные приложения или инструменты, которые считаются наиболее полезными или подходящими для целевой аудитории.
5. **Целевая аудитория и использование:**
    - Разные дистрибутивы ориентированы на разные цели. Например, серверные дистрибутивы, такие как CentOS или Debian, часто фокусируются на стабильности и безопасности, в то время как дистрибутивы для настольных систем, такие как Ubuntu или Fedora, могут быть нацелены на простоту использования и актуальные пользовательские интерфейсы.
6. **Сроки поддержки и циклы выпусков:**
    - Разные дистрибутивы имеют разные сроки поддержки и циклы выпусков. Некоторые предоставляют долгосрочную поддержку с медленными циклами выпусков, в то время как другие ориентированы на более частые и актуальные релизы.
7. **Сообщество и поддержка:**
    - Различия могут быть в сообществе и уровне поддержки. Некоторые дистрибутивы имеют большие и активные сообщества, предлагающие широкий спектр ресурсов и помощи, тогда как другие могут быть менее популярными.

Команда `**echo /etc/*rel***` отображает имена файлов, соответствующих шаблону `**/etc/*rel***`. Здесь `**/etc/*rel***` представляет собой поиск файлов в каталоге `**/etc/**`, имена которых содержат "rel" или подходят под этот шаблон —> **`/etc/lsb-release /etc/os-release`**

Команда `**cat /etc/os-release**` выводит содержимое файла `**/etc/os-release**`, который обычно содержит информацию о версии и типе операционной системы. В большинстве дистрибутивов Linux этот файл используется для предоставления метаданных об операционной системе.

### Разделение памяти в Linux

В операционной системе Linux память разделяется на два основных пространства: user space (пользовательское пространство) и kernel space (пространство ядра). Это разделение обеспечивает изоляцию между пользовательскими приложениями и ядром операционной системы.

1. **User Space (Пользовательское пространство):**
    - _Описание:_ User space предназначено для выполнения пользовательских приложений. Здесь располагаются программы, библиотеки и данные, связанные с конкретными задачами и приложениями, которые запущены пользователем.
    - _Характеристики:_ В пользовательском пространстве приложения выполняются в пользовательском режиме (user mode), который ограничивает их доступ к аппаратным ресурсам и предоставляет защиту от прямого взаимодействия с аппаратурой. Пользовательские программы могут вызывать системные вызовы для обращения к функциям ядра.
2. **Kernel Space (Пространство ядра):**
    - _Описание:_ Kernel space содержит ядро операционной системы и связанные с ним структуры данных и код. Здесь находятся драйвера устройств, системные вызовы и ядро, отвечающее за управление ресурсами и обеспечение работы операционной системы.
    - _Характеристики:_ В пространстве ядра код выполняется в привилегированном режиме (kernel mode), который предоставляет полный доступ к аппаратным ресурсам. Ядро обеспечивает базовые функции операционной системы, такие как планирование процессов, управление памятью, ввод-вывод и обработка прерываний.

Разделение на user space и kernel space обеспечивает следующие преимущества:

- **Изоляция:** Пользовательские приложения не могут прямо взаимодействовать с аппаратурой или изменять ядро, что обеспечивает стабильность и безопасность системы.
- **Безопасность:** Защита от несанкционированного доступа и ошибок пользовательских приложений, так как ядро работает в привилегированном режиме.
- **Стабильность:** Проблемы в пользовательском пространстве обычно не влияют на работу ядра, обеспечивая стабильную работу системы.
- **Управление ресурсами:** Ядро операционной системы принимает решения о выделении ресурсов и управлении ими в пространстве ядра.

### Взаимодействие программ с ядром и ядра с аппаратным обеспечением

**1.** **Системные вызовы:**

- **Программы → Ядро:** Пользовательские программы могут обращаться к ядру операционной системы через системные вызовы. Эти вызовы предоставляют пользовательским приложениям доступ к функциональности ядра. Примеры системных вызовов включают открытие/закрытие файлов, чтение/запись данных, управление процессами и другие.

**2.** **Библиотеки:**

- **Программы → Ядро:** Пользовательские программы могут использовать библиотеки, которые в свою очередь выполняют системные вызовы от имени приложения. Например, стандартная библиотека языка C может предоставлять функции, которые выполняют системные вызовы для работы с файлами, памятью и т. д.

**3.** **Устройственные драйверы:**

- **Ядро → Аппаратное обеспечение:** Ядро операционной системы взаимодействует с аппаратным обеспечением через драйверы устройств. Драйверы предоставляют абстракцию для работы с конкретными устройствами. Когда приложение выполняет операции ввода/вывода (например, чтение файла), ядро использует соответствующие драйверы для взаимодействия с аппаратурой.

**4.** **Прерывания:**

- **Аппаратное обеспечение → Ядро:** Аппаратное обеспечение может генерировать прерывания для уведомления ядра об определенных событиях. Прерывания могут быть вызваны, например, завершением операции ввода/вывода или появлением сигнала от таймера. Ядро использует обработчики прерываний для реагирования на эти события.

**5.** **Управление памятью:**

- **Ядро → Аппаратное обеспечение:** Ядро управляет памятью системы и обеспечивает виртуальные адреса для приложений. Оно использует механизмы управления памятью, такие как страничное кэширование, чтобы обеспечить доступ приложений к физической памяти.

**6.** **Планирование задач:**

- **Ядро → Аппаратное обеспечение:** Ядро решает, какие процессы получают доступ к центральному процессору и в каком порядке. Механизмы планирования задач в ядре определяют, как процессы выполняются и каково их время выполнения.

**7.** **Обработка ошибок и исключений:**

- **Аппаратное обеспечение → Ядро:** Ядро отвечает за обработку ошибок и исключений, происходящих на уровне аппаратного обеспечения. Это включает в себя обработку недопустимых инструкций, деление на ноль, аппаратных ошибок и т. д.

### Примеры системных вызовов

1. **Создание процесса:**
    - Пример: `**fork()**`
    - Описание: Создает новый процесс, который является копией вызывающего процесса.
2. **Завершение процесса:**
    - Пример: `**exit()**`
    - Описание: Завершает выполнение текущего процесса.
3. **Чтение из файла:**
    - Пример: `**read()**`
    - Описание: Считывает данные из открытого файла в буфер.
4. **Запись в файл:**
    - Пример: `**write()**`
    - Описание: Записывает данные из буфера в открытый файл.
5. **Открытие файла:**
    - Пример: `**open()**`
    - Описание: Открывает файл, возвращая файловый дескриптор для дальнейшей работы с ним.
6. **Закрытие файла:**
    - Пример: `**close()**`
    - Описание: Закрывает открытый файл по его файловому дескриптору.
7. **Выделение памяти:**
    - Пример: `**malloc()**`
    - Описание: Выделяет динамическую память для использования программой.
8. **Смена текущего рабочего каталога:**
    - Пример: `**chdir()**`
    - Описание: Изменяет текущий рабочий каталог процесса.
9. **Создание нового каталога:**
    - Пример: `**mkdir()**`
    - Описание: Создает новый каталог.
10. **Системный вызов времени:**
    - Пример: `**time()**`
    - Описание: Возвращает текущее время или количество прошедших секунд с начала эпохи.
11. **Системный вызов сна (задержки):**
    - Пример: `**sleep()**`
    - Описание: Приостанавливает выполнение процесса на заданное количество секунд.
12. **Создание и управление потоками:**
    
    - Пример: `**pthread_create()**`, `**pthread_join()**`
    - Описание: Создает и управляет потоками выполнения в многозадачной среде.
<div class="page-break" style="page-break-before: always;"></div>

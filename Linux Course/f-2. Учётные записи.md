User Account

Типы аккаунтов

Group

Команды для получения информации о пользователях

Команды для изменения пользователя

Sudoers

### User Account

Учетная запись пользователя представляет собой учетные данные, необходимые для идентификации и авторизации пользователей в операционной системе. Эти данные включают в себя различные параметры и настройки для каждого пользователя.

**Основные компоненты учетной записи пользователя в Linux:**

1. **Имя пользователя (Username):**
    - Уникальное имя, по которому система идентифицирует пользователя. Обычно используется для входа в систему.
2. **Пароль (Password):**
    - Хэшированный пароль пользователя. Обычно хранится в файле `**/etc/shadow**`, и доступ к этому файлу имеет только системный администратор. Реальный пароль не хранится в открытом виде.
3. **User ID (UID):**
    - Уникальный числовой идентификатор пользователя. Каждый пользователь имеет уникальный UID, и он используется ядром операционной системы для идентификации пользователя.
4. **Group ID (GID):**
    - Идентификатор группы, к которой принадлежит пользователь. Это позволяет группировать пользователей с общими правами.
5. **Домашний каталог (Home Directory):**
    - Путь к каталогу, который служит домашним для пользователя. Здесь пользователь может сохранять свои файлы и настраивать окружение.
6. **Оболочка (Shell):**
    - Программа-оболочка, предоставляющая командный интерфейс для пользователя. Например, `**/bin/bash**` или `**/bin/zsh**`.
7. **Остальные параметры:**
    - Дополнительные параметры могут включать в себя ограничения срока действия пароля, квоты на использование дискового пространства, права доступа и другие параметры безопасности.

В `**/etc/passwd**` содержатся основные сведения о пользователях, включая UID, GID, домашний каталог и оболочку.

Файл `**/etc/shadow**` содержит зашифрованные пароли и дополнительные параметры безопасности. Обычно доступ к этим файлам имеет только суперпользователь (root).

### Типы аккаунтов

1. **Суперпользователь (Superuser, Root):**
    
    Суперпользователь обладает полными правами доступа ко всем ресурсам и операциям в системе. Он может выполнять любые команды, включая те, которые могут повлиять на стабильность и безопасность системы.
    
    Вход в учетную запись суперпользователя обычно осуществляется с использованием команды `**su**` или `**sudo**`.
    
    - _Имя пользователя:_ root
    - _UID и GID:_ 0
2. **Обычные аккаунты:**
    
    Обычные аккаунты предназначены для конечных пользователей и отличаются по своему назначению:
    
    - _Системные аккаунты:_ Эти аккаунты создаются для выполнения определенных служб или процессов в системе. Они обеспечивают изоляцию и безопасность выполнения различных служб.
        - _Примеры:_ `**root**`, `**daemon**`, `**bin**`, `**sys**`, `**sync**`.
        - _UID и GID:_ Низкие и уникальные идентификаторы, назначаемые для системных нужд.
    - _Пользовательские аккаунты:_ Эти аккаунты предназначены для обычных пользователей, которые используют систему для своих повседневных задач. У каждого пользователя есть свой собственный домашний каталог, в котором хранятся личные файлы и настройки.
        - _Примеры:_ `**john**`, `**jane**`, `**alice**`.
        - _UID и GID:_ Уникальные идентификаторы, обычно выше 1000.
    

### Group

Группа представляет собой механизм организации пользователей с целью управления правами доступа к ресурсам и файлам.

**Основные аспекты понятия групп в Linux:**

1. **Имя Группы (Group Name):**
    - Уникальное имя, идентифицирующее группу. Как и у пользователей, имя группы должно быть уникальным в пределах системы.
2. **Group ID (GID):**
    - Уникальный числовой идентификатор, присвоенный каждой группе. Он используется внутри системы для однозначного определения группы.
3. **Члены Группы (Group Members):**
    - Пользователи, включенные в группу. Каждый пользователь может быть членом нескольких групп.
4. **Primary Group (Основная Группа):**
    - Каждый пользователь имеет основную группу, к которой он автоматически присоединяется при создании учетной записи. По умолчанию, это группа с тем же именем, что и имя пользователя.
5. **Supplementary Groups (Дополнительные Группы):**
    - Пользователь может также принадлежать к нескольким дополнительным группам. Это дает пользователю права доступа к ресурсам, которые принадлежат этим группам.

Файл `**/etc/group**` содержит информацию о группах. В нем указаны имена групп, их GID, а также члены группы.

### Команды для получения информации о пользователях

1. `**id user_name**` **(идентификация пользователя):**
    
    Команда `**id**` используется для отображения информации о пользователе в системе, такой как идентификатор пользователя (UID), идентификатор основной группы (GID) и список дополнительных групп, к которым пользователь принадлежит.
    
2. `**who**` **(отображение залогинившихся пользователей):**
    
    Команда `**who**` отображает информацию о текущих пользователях, вошедших в систему. Это включает в себя имена пользователей, терминалы, с которых они вошли, дату и время входа.
    
3. `**w**` **(отображение активных пользователей):**
    
    Команда `**w**` предоставляет информацию о текущих пользователях и их активности. Она включает в себя имя пользователя, его терминал, время входа, текущие выполняемые команды и загрузку системы.
    
4. `**last**` **(отображение истории входов в систему):**
    
    Команда `**last**` отображает информацию о предыдущих входах в систему, показывая имена пользователей, терминалы, с которых они входили, даты и времена входа и выхода. Команда `**last**` также отображает строку "reboot" для каждого перезапуска системы. Эта строка указывает на момент времени, когда была выполнена последняя перезагрузка системы.
    

### Команды для изменения пользователя

1. `**sudo**` (Superuser Do)**:**
    
    Команда `**sudo**` используется для выполнения команд с привилегиями суперпользователя (root). Обычно она требует ввода пароля пользователя, который имеет права на использование `**sudo**`.
    
    - _Пример использования:_ `**sudo apt update**`
    - _Примечание:_ Команда `**sudo**` позволяет обычным пользователям выполнять определенные привилегированные действия без необходимости входа в систему под суперпользователем. Пользователь должен входить в группу `**sudoers**` для использования `**sudo**`. Команды, которые можно выполнять с помощью `**sudo**`, определяются в файле `**/etc/sudoers**`.
2. `**su**` (Switch User)**:**
    
    Команда `**su**` используется для переключения пользователя или входа в систему под другим пользователем. Если команда вызывается без указания имени пользователя, по умолчанию происходит переключение на суперпользователя (root).
    
    - _Пример использования:_ `**su username**`
    - _Примечание:_ После ввода `**su**` пользователь должен ввести пароль нового пользователя.
    - Флаг `**-c**` в команде `**su**` используется для выполнения команды от имени другого пользователя без необходимости полного входа в систему под этим пользователем. (не рекомендуется)

### Sudoers

Файл `**sudoers**` является конфигурационным файлом, который определяет, какие пользователи и группы могут использовать команду `**sudo**` для выполнения команд с повышенными привилегиями в системе Linux.

Он располагается по адресу `**/etc/sudoers**` и должен редактироваться с осторожностью, так как любые ошибки в этом файле могут привести к проблемам с безопасностью и функциональности системы.

Файл `**sudoers**` имеет специфический формат строк, представляющих правила доступа. Каждая строка состоит из различных полей, которые определяют, кто, откуда и какие команды может выполнять с использованием `**sudo**`.

Значения полей в строках файла `**sudoers**`:

1. **Пользователь (User):**
    
    Это поле указывает на пользователя, которому применяется правило. Может быть конкретным именем пользователя, группой пользователей (предваренной символом `**%**`), или ключевым словом `**ALL**`, обозначающим любого пользователя.
    
2. **Хост (Host):**
    
    Это поле определяет на каком хосте можно использовать `**sudo**`. Может быть конкретным именем хоста, IP-адресом, доменом или ключевым словом `**ALL**`, обозначающим любой хост.
    
3. **Пользователь для выполнения (Runas):**
    
    Это поле определяет от имени какого пользователя или группы можно выполнять команды. Может быть конкретным именем пользователя, группой (предваренной символом `**%**`), ключевым словом `**ALL**`, обозначающим любого пользователя или группу.
    
4. **Команда (Command):**
    
    Это поле определяет, какие команды или командные шаблоны можно выполнять с использованием `**sudo**`. Может быть конкретной командой, командным шаблоном, или ключевым словом `**ALL**`, обозначающим любую команду.
    
5. **Опции и правила (Options and Rules):**
    
    Это дополнительные опции и правила, уточняющие условия использования `**sudo**`. Опции могут включать `**NOPASSWD**` (без запроса пароля), а правила могут указывать дополнительные параметры доступа.
    

Пример строки в файле `**sudoers**`:

```Bash
john ALL=(ALL:ALL) /usr/bin/apt-get update
```

- `**john**`: Пользователь (User) - правило применяется к пользователю John.
- `**ALL**`: Хост (Host) - правило действует на любом хосте.
- `**(ALL:ALL)**`: Пользователь для выполнения (Runas) - команды могут выполняться от имени любого пользователя и группы.
- `**/usr/bin/apt-get update**`: Команда (Command) - разрешено обновление списка пакетов в локальных репозиториях.

Команда `**visudo**` используется для безопасного редактирования файла `**sudoers**`, который содержит конфигурацию `**sudo**`. Эта команда предназначена для обеспечения правильности синтаксиса файла `**sudoers**` и предотвращения возможных ошибок, которые могли бы заблокировать пользователя в системе, если были бы просто внесены изменения вручную.

Пример использования `**visudo**`:

```Shell
sudo visudo
```

Когда вы вводите эту команду, `**visudo**` открывает файл `**sudoers**` в текстовом редакторе, предоставляя вам возможность внести изменения. Однако, в отличие от обычного текстового редактора, `**visudo**` выполняет несколько проверок:

1. **Проверка синтаксиса:**
    - `**visudo**` проверяет синтаксис файла `**sudoers**` на корректность, прежде чем разрешить сохранение изменений. Это предотвращает сохранение конфигурации с ошибками, которые могли бы привести к невозможности использования `**sudo**`.
2. **Использование текстового редактора с блокировкой:**
    - `**visudo**` использует текстовый редактор с блокировкой, что означает, что файл `**sudoers**` блокируется для других пользователей во время редактирования. Это предотвращает возможные конфликты при одновременном редактировании.
3. **Атомарное сохранение:**
    - Если изменения успешно проходят проверку синтаксиса, `**visudo**` сохраняет файл `**sudoers**` атомарно, что означает, что либо все изменения сохраняются целиком, либо ни одно из них. Это предотвращает несогласованные состояния файла `**sudoers**`.

Добавление `**/usr/sbin/nologin**` в качестве оболочки для пользователя root в файле `**/etc/passwd**` может быть использовано для предотвращения входа пользователя root в систему через интерактивные средства, такие как командная строка или удаленное подключение. Этот файл является специальным файлом, предназначенным для предоставления сообщения об отсутствии доступа вместо оболочки командной строки.

Это может быть полезным с точки зрения безопасности, так как ограничивает возможность интерактивного входа root в систему. Однако, убедитесь, что у вас есть другие способы управления системой и восстановления доступа, например, через другого пользователя с привилегиями sudo.
<div class="page-break" style="page-break-before: always;"></div>
